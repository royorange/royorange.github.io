{"version":3,"sources":["providers/Web3.js","components/helper/BscRPCHelper.js","providers/NationContract.js","providers/MetadataProvider.js","1.gif","components/Card.js","components/List/List.js","views/profile.js","components/Filter/Filter.js","views/showroom.js","components/Wallet/WalletButton.js","components/Layout/Layout.js","Providers.js"],"names":["Web3Context","React","createContext","getWeb3","a","window","ethereum","web3","Web3","enable","console","log","provider","providers","HttpProvider","Web3Provider","children","useState","undefined","setweb3","account","setaccount","disconnect","useCallback","connect","instance","eth","getAccounts","accounts","length","Provider","value","useWeb3","useContext","BSCMainNetRPCHelper","NationContractContext","NationContractProvider","setinstance","isBsc","setisBsc","useEffect","net","getId","networkId","deployedNetwork","NationContract","networks","Contract","abi","address","createInstance","MetadataContext","MetadataProvider","md","setmd","fetch","then","response","json","data","useMetadata","SPECIAL_ATTRIBUTE","Card","item","isSpecial","useMemo","attributes","some","attr","isSpecialCard","className","src","image","alt","name","description","special","List","allItems","pageSize","items","setitems","hasMore","sethasMore","slice","dataLength","next","append","i","push","loader","endMessage","style","textAlign","map","index","Profile","nationContract","ownedItems","setownedItems","methods","balanceOf","call","count","idx","Promise","all","tokenOfOwnerByIndex","tokenIds","tokenId","fetchOwned","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","width","color","getStyles","attrName","theme","fontWeight","indexOf","typography","fontWeightRegular","fontWeightMedium","AttributeGroupFilter","groupName","onChange","useTheme","setattrName","FormControl","sx","m","InputLabel","id","Select","labelId","multiple","event","target","attrs","split","group","input","OutlinedInput","label","renderValue","selected","Box","display","flexWrap","gap","Chip","MenuItem","rarity","toFixed","ShowRoom","collection","filters","setfilters","forEach","attrsMap","attrGroups","Object","keys","filter","key","onFilterChange","attributeMatched","sort","b","WalletButton","onClick","Layout","Providers"],"mappings":"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","file":"static/js/3.75c2df36.chunk.js","sourcesContent":["import React from 'react';\nimport Web3 from 'web3';\n\nconst Web3Context = React.createContext({});\n\n\nasync function getWeb3() {\n    if (window.ethereum) {\n        const web3 = new Web3(window.ethereum);\n        try {\n            // Request account access if needed\n            await window.ethereum.enable();\n            // Accounts now exposed\n\n            return web3\n        } catch (error) {\n            console.log(error);\n        }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n        // Use Mist/MetaMask's provider.\n        const web3 = window.web3;\n        console.log(\"Injected web3 detected.\");\n        return web3\n    }\n    // Fallback to localhost; use dev console port by default...\n    else {\n        const provider = new Web3.providers.HttpProvider(\n            \"http://127.0.0.1:8545\"\n        );\n        const web3 = new Web3(provider);\n        console.log(\"No web3 instance injected, using Local web3.\");\n        return web3\n    }\n}\n\n\nexport const Web3Provider = ({ children }) => {\n    const [web3, setweb3] = React.useState(undefined);\n    const [account, setaccount] = React.useState(undefined);\n\n\n    const disconnect = React.useCallback(() => {\n        if (web3) {\n            setweb3(undefined);\n            setaccount(undefined);\n        }\n    }, [setweb3, web3])\n\n    const connect = React.useCallback(async () => {\n        if (web3) { return }\n        const instance = await getWeb3();\n        const accounts = await instance.eth.getAccounts();\n        if (accounts.length > 0) {\n            setaccount(accounts[0])\n        }\n        setweb3(instance);\n\n    }, [web3, setweb3, setaccount])\n\n    return (\n        <>\n            <Web3Context.Provider value={{ web3, connect, disconnect, account }}>\n                {children}\n            </Web3Context.Provider>\n        </>\n    )\n}\n\nexport const useWeb3 = () => {\n    return React.useContext(Web3Context);\n}","import React from 'react';\n\n\n\nexport const BSCMainNetRPCHelper = () => {\n    return (\n        <>\n            <h1>如何在Metamask中添加BSC主网RPC？</h1>\n        </>\n    )\n}","import React from 'react';\nimport { useWeb3 } from './Web3';\nimport NationContract from '../contracts/Nation.json';\nimport { BSCMainNetRPCHelper } from '../components/helper/BscRPCHelper';\n\nconst NationContractContext = React.createContext(undefined);\n\n\nexport const NationContractProvider = ({ children }) => {\n\n    const {web3} = useWeb3();\n\n    const [instance, setinstance] = React.useState(undefined);\n    const [isBsc, setisBsc] = React.useState(true);\n    React.useEffect(() => {\n        if (!web3) {return}\n        async function createInstance() {\n            // Get the contract instance.\n            const networkId = await web3.eth.net.getId();\n            setisBsc(networkId === 97 || networkId === 56 || networkId === 1337);\n\n            const deployedNetwork = NationContract.networks[networkId];\n            const instance = new web3.eth.Contract(\n                NationContract.abi,\n                deployedNetwork && deployedNetwork.address,\n            );\n            setinstance(instance)\n        }\n\n        createInstance()\n    }, [web3])\n\n\n    return (\n        <NationContractContext.Provider value={instance}>\n            {\n                isBsc\n                    ?\n                    children\n                    :\n                    <BSCMainNetRPCHelper />\n            }\n        </NationContractContext.Provider>\n    )\n}\n\nexport const useNationContract = () => {\n    return React.useContext(NationContractContext);\n}","import React from 'react';\n\nconst MetadataContext = React.createContext(undefined);\n\n\nexport const MetadataProvider = ({ children }) => {\n    const [md, setmd] = React.useState(undefined);\n\n    React.useEffect(() => {\n        fetch('Nation-Origins-α.json')\n            .then(response => {\n                response.json().then(data => {\n                    setmd(data)\n                })\n            })\n    }, [])\n\n    return (\n        <MetadataContext.Provider value={md}>\n            {children}\n        </MetadataContext.Provider>\n    )\n}\n\nexport const useMetadata = () => {\n    return React.useContext(MetadataContext);\n}","export default __webpack_public_path__ + \"static/media/1.36e0cbe5.gif\";","import React from 'react';\nimport { useNationContract } from '../providers/NationContract';\nimport './Card.css';\nimport special from '../1.gif';\n\nconst SPECIAL_ATTRIBUTE = {\n  '无政府主义': 1,\n  '脑机': 1,\n  '飞碟残骸': 1,\n  '幸运': 1,\n  '比特币': 1,\n  '太空旅行': 1,\n  '熔岩地貌': 1,\n  '风蚀地貌': 1,\n  '冰川地貌': 1,\n};\n\nfunction isSpecialCard(item) {\n  return item.attributes.some((attr) => {\n    return SPECIAL_ATTRIBUTE[attr.value] > 0\n  })\n}\n\nexport const Card = ({ item }) => {\n\n  const isSpecial = React.useMemo(() => {\n    return isSpecialCard(item)\n  }, [item])\n\n  // React.useEffect(() => {\n\n  //   async function getToken() {\n  //     if (!contract) {\n  //       console.log('contract not inited');\n  //       return\n  //     }\n\n  //     const res = await contract.methods.tokenURI(tokenId).call();\n\n  //     const data = Buffer.from(res.replace('data:application/json;base64,', ''), 'base64').toString();\n  //     setitem(JSON.parse(data));\n  //   }\n\n  //   getToken()\n  // }, [contract, tokenId])\n\n\n  return (\n    <>\n      {\n        item &&\n\n        <div className=\"card\">\n          <img src={item.image} alt={item.name} />\n          <div className=\"card-meta\">\n            <h2>{item.name}</h2>\n            <p>{item.description}</p>\n            \n          </div>\n          {isSpecial && <img className=\"special\" src={special} alt=\"special\" />}\n        </div>\n      }\n\n    </>\n  )\n}","import React from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { Card } from '../Card';\n\nimport './List.css';\n\nexport const List = ({ allItems, pageSize = 20 }) => {\n    const [items, setitems] = React.useState([]);\n    const [hasMore, sethasMore] = React.useState(true);\n\n    React.useEffect(() => {\n        setitems(allItems.slice(0, pageSize));\n        sethasMore(allItems.length > pageSize);\n    }, [allItems, pageSize])\n\n    const fetchMoreData = () => {\n        if (items.length >= allItems.length) {\n            sethasMore(false);\n            return\n        }\n\n        let append = [];\n        for (let i = items.length; i < allItems.length && i < items.length + pageSize; i++) {\n            append.push(allItems[i]);\n        }\n\n        setitems([...items, ...append])\n    }\n\n    return (\n        <>\n            <InfiniteScroll\n                dataLength={items.length}\n                next={fetchMoreData}\n                hasMore={hasMore}\n                loader={<h4>Loading...</h4>}\n                endMessage={\n                    <p style={{ textAlign: \"center\" }}>\n                        <b></b>\n                    </p>\n                }\n            >\n                <div className=\"card-box\">\n                    {items.map((item, index) => <Card key={index} item={item} />)}\n                </div>\n            </InfiniteScroll>\n        </>\n    )\n}","import React from 'react';\nimport { useMetadata } from '../providers/MetadataProvider';\nimport { useNationContract } from '../providers/NationContract';\nimport { useWeb3 } from '../providers/Web3';\nimport { List } from '../components/List/List';\n\nexport const Profile = () => {\n    const { account } = useWeb3();\n    const nationContract = useNationContract();\n    const md = useMetadata();\n    const [ownedItems, setownedItems] = React.useState([]);\n\n\n    React.useEffect(() => {\n\n        async function fetchOwned() {\n            let count = await nationContract.methods.balanceOf(account).call();\n            let idx = [];\n            for (let i = 0; i < count; i++) {\n                idx.push(i);\n            }\n\n            let tokenIds = await Promise.all(\n                idx.map(i => {\n                    return nationContract.methods.tokenOfOwnerByIndex(account, i).call()\n                })\n            );\n\n\n            let items = tokenIds.map(tokenId => {\n                return md.items[tokenId - 1]\n            });\n\n            setownedItems(items)\n        }\n\n        if (!account || !nationContract || !md) {\n            return\n        }\n\n\n        fetchOwned()\n\n    }, [account, nationContract, md])\n\n    return (\n        <>\n            {account && <List allItems={ownedItems} />}\n        </>\n    )\n}\n","import * as React from 'react';\nimport { useTheme } from '@mui/material/styles';\nimport Box from '@mui/material/Box';\nimport OutlinedInput from '@mui/material/OutlinedInput';\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport Chip from '@mui/material/Chip';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n      color: '#000'\n    },\n  },\n};\n\nfunction getStyles(name, attrName, theme) {\n  return {\n    fontWeight:\n      attrName.indexOf(name) === -1\n        ? theme.typography.fontWeightRegular\n        : theme.typography.fontWeightMedium,\n  };\n}\n\nexport const AttributeGroupFilter = ({ groupName, attributes, onChange }) => {\n  const theme = useTheme();\n  const [attrName, setattrName] = React.useState([]);\n\n\n  const handleChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    const attrs = typeof value === 'string' ? value.split(',') : value;\n    onChange && onChange({ group: groupName, attrs })\n    setattrName(attrs);\n  };\n\n  return (\n    <div>\n      <FormControl sx={{ m: 1, width: 300 }}>\n        <InputLabel id=\"demo-multiple-chip-label\">{groupName}</InputLabel>\n        <Select\n          labelId=\"demo-multiple-chip-label\"\n          id=\"demo-multiple-chip\"\n          multiple\n          value={attrName}\n          onChange={handleChange}\n          input={<OutlinedInput id=\"select-multiple-chip\" label=\"参数\" />}\n          renderValue={(selected) => (\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n              {selected.map((value) => (\n                <Chip key={value} label={value} />\n              ))}\n            </Box>\n          )}\n          MenuProps={MenuProps}\n        >\n          {attributes.map((attr) => (\n            <MenuItem\n              key={attr.value}\n              value={attr.value}\n              style={getStyles(attr.value, attrName, theme)}\n            >\n              {`${attr.value} - 稀有度${(attr.rarity * 100).toFixed(2)}%`}\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n    </div>\n  );\n}","import React from 'react';\nimport { List } from '../components/List/List';\nimport { useMetadata } from '../providers/MetadataProvider';\nimport { AttributeGroupFilter } from '../components/Filter/Filter';\n\nimport './showroom.css';\n\nfunction attributeMatched(item, filters) {\n\n    for (const group of Object.keys(filters)) {\n        for (const value of filters[group]) {\n            if (!item.attrsMap[value]) { return false }\n        }\n    }\n    return true\n}\n\nexport const ShowRoom = () => {\n\n    const collection = useMetadata();\n    const [filters, setfilters] = React.useState({});\n    const [items, setitems] = React.useState([]);\n\n    const allItems = React.useMemo(() => {\n        if (!collection) { return [] }\n        return collection.items.map(item => {\n            let m = {};\n            item.attributes.forEach(attr => m[attr.value] = 1);\n            item.attrsMap = m;\n            return item\n        })\n    }, [collection]);\n\n    React.useEffect(() => {\n        if (!collection) { return [] }\n        setitems(allItems);\n    }, [collection, allItems])\n\n    const attrGroups = React.useMemo(() => {\n        if (!collection) {\n            return\n        }\n\n        return Object.keys(collection.attributes).filter(key => key !== '历史长度').map(key => {\n            const group = collection.attributes[key];\n            return {\n                name: key,\n                attributes: Object.keys(group).map(key => {\n                    return {\n                        value: key,\n                        count: group[key],\n                        rarity: group[key] / collection.items.length\n                    }\n                }),\n            }\n        })\n    }, [collection])\n\n    const onFilterChange = React.useCallback(({ group, attrs }) => {\n        filters[group] = attrs;\n        setfilters(filters)\n        setitems(allItems.filter(item => attributeMatched(item, filters)));\n    }, [filters, allItems])\n\n\n    return (\n        <>{\n            collection ?\n                <>\n                    <div className=\"collection-meta\">\n                        <h1 className=\"title\">{collection.collection.name}</h1>\n                        <p className=\"description\">{collection.description}</p>\n                    </div>\n                    <div className=\"items-box\">\n                        <div className=\"items-filter-box\">\n                            <p className=\"items-count\">{`共${items.length}项`}</p>\n                            {\n                                attrGroups.map(group => <AttributeGroupFilter\n                                    key={group.name}\n                                    groupName={group.name}\n                                    attributes={group.attributes.sort((a, b) => a.rarity - b.rarity)}\n                                    onChange={onFilterChange} />)\n                            }\n                        </div>\n                        <div className=\"items-list\">\n                            \n                            <List allItems={items} />\n                        </div>\n\n                    </div>\n                </>\n                : <p>加载中</p>\n\n        }\n\n        </>\n    )\n}","import React from 'react';\nimport { useWeb3 } from '../../providers/Web3';\nimport './WalletButton.css';\n\n\nexport const WalletButton = () => {\n  const { connect, disconnect, account } = useWeb3();\n\n\n  return (\n    <div className=\"wallet-box\">\n      {\n        account ? <>\n          <p className=\"wallet-account\">{account}</p>\n          <button className=\"wallet-connect-btn\" onClick={disconnect}>断开连接</button>\n        </>\n          :\n          <button className=\"wallet-connect-btn\" onClick={connect}>连接钱包</button>\n      }\n    </div>\n  )\n}","import React from 'react';\nimport { WalletButton } from '../Wallet/WalletButton';\n\nimport './Layout.css';\n\nexport const Layout = ({ children }) => {\n    return (\n        <>\n            <nav className=\"nav\">\n                <h2>Nation Origins</h2>\n                <WalletButton />\n            </nav>\n            <main>\n                {children}\n            </main>\n        </>\n    )\n}","import React from 'react';\nimport { Web3Provider } from './providers/Web3';\nimport { NationContractProvider } from './providers/NationContract';\nimport { MetadataProvider } from './providers/MetadataProvider';\nimport { Profile } from './views/profile';\nimport { ShowRoom } from './views/showroom';\nimport { Layout } from './components/Layout/Layout';\n\n\n\n\n\nfunction Providers() {\n  return (\n    <>\n      <MetadataProvider>\n        <Web3Provider>\n          <Layout>\n            <NationContractProvider>\n\n              <Profile />\n\n            </NationContractProvider>\n            <ShowRoom />\n          </Layout>\n\n        </Web3Provider>\n      </MetadataProvider>\n    </>\n  );\n}\n\nexport default Providers;\n"],"sourceRoot":""}